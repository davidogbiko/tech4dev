# Build and test docker image for golang application
# Setup go build environment
name: Build and test docker image for golang application
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4.2.2
    - name: Setup Go
      uses: actions/setup-go@v5.2.0
      with:
        go-version: 1.23.3
    - name: Run go test
      run: |
        cd 1m-wk3-d2/mega-app && go test ./...
    # - name: Build docker image
    #   run: docker build -t golang-app .
    # - name: Push docker image
    #   run: docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}
    # - name: Deploy docker image
    #   run: kubectl apply -f deployment.yaml
# Build go application
# Run go test
# Build docker image
# Push docker image to docker hub
# Deploy docker image to kubernetes cluster
